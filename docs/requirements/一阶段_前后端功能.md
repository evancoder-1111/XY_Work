### **项目：统一数字门户**

#### **功能点：**

- **自定义入口**：用户可以在门户中动态添加公司各个系统的入口，系统入口支持配置图标、名称、描述、URL，并能够集成 SSO 登录。
- **SSO 登录**：通过统一的 SSO 认证（如 OAuth2、SAML），用户登录一次后，可以无缝访问多个内部系统（如项目管理、文档管理等）。
- **角色化工作台**：根据不同角色（管理层、产品经理、开发者、测试人员），显示不同的工作任务和统计数据。
- **待办任务与通知**：聚合来自不同系统（如禅道、CI/CD、监控告警）的任务和通知。

#### **前端设计：**

- **工作台界面**：使用 Vue 3 和 Element Plus 实现角色化工作台和自定义入口。
- **登录界面**：用户通过 SSO 或用户名/密码登录，登录后显示个性化工作台。
  - `el-input`：用于输入用户名和密码。
  - `el-button`：用于提交登录请求。
  - `el-message`：用于显示登录错误信息。
- **自定义入口配置**：允许管理员或用户在工作台界面配置系统入口（如：项目管理、文档管理）。
  - 配置页面提供字段：名称、图标、描述、URL。
  - 每个入口显示为可点击的卡片，点击后跳转至相应系统。
- **前端任务：**
  - 使用 Vue Router 路由管理工作台页面和登录页面。
  - 登录成功后，用户状态存储在 Vuex 或 Pinia 中。
  - 请求 SSO 登录接口：`/api/v1/auth/sso/login`，获取用户角色与权限信息。

#### **后端设计：**

- **用户认证接口**：

  - 提供 SSO 登录接口 `/api/v1/auth/sso/login`，验证用户身份并返回 JWT token。
  - 与 SSO 提供商（如 OAuth2、SAML）集成，确保统一认证。

- **自定义入口接口**：

  - 提供接口 `/api/v1/portal/entries` 获取公司各个系统的入口信息。
  - 允许管理员管理入口的添加、修改和删除。

- **后端接口示例：**

  ```java
  @PostMapping("/api/v1/auth/sso/login")
  public ResponseEntity<SsoLoginResponse> ssoLogin(@RequestBody SsoLoginRequest ssoLoginRequest) {
      // 调用 SSO 服务进行身份验证，获取用户数据与权限信息
      return ResponseEntity.ok(new SsoLoginResponse(userDetails, ssoToken));
  }
  
  @GetMapping("/api/v1/portal/entries")
  public ResponseEntity<List<PortalEntry>> getPortalEntries() {
      // 返回所有已配置的系统入口
      return ResponseEntity.ok(portalEntryService.getEntries());
  }
  ```

#### **数据库设计：**

- **用户表：**

  ```
  CREATE TABLE users (
      id BIGINT AUTO_INCREMENT PRIMARY KEY,
      username VARCHAR(255) NOT NULL UNIQUE,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(255) NOT NULL,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );
  ```

- **门户入口表：**

  ```
  CREATE TABLE portal_entries (
      id BIGINT AUTO_INCREMENT PRIMARY KEY,
      name VARCHAR(255) NOT NULL,
      description VARCHAR(512),
      icon VARCHAR(255),
      url VARCHAR(255) NOT NULL,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );
  ```

#### **验收标准：**

1. 用户能够通过 SSO 登录后，自动跳转至角色对应的工作台页面。
2. 管理员可以在门户中动态添加和管理不同系统的入口。
3. 所有系统入口支持 SSO 登录，用户只需登录一次即可访问多个应用。


### 总结：

1. **统一数字门户**：增强了自定义系统入口与 SSO 登录的集成，确保用户可以无缝访问多个应用，并根据角色展示定制化工作台。
3. **后端设计**：确保了前后端良好的交互，支持实时的代码补全与自动注释，并通过 AI 服务生成高质量的代码建议。
4. **测试与验收标准**：通过前后端单元测试与集成测试，确保系统的稳定性与功能的完善。

