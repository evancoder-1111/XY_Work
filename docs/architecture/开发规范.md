# XY Work 统一数字门户 - 开发规范

## 1. 分支管理

### 1.1 分支模型

- **main**：生产环境分支，受保护，仅接受合并请求
- **develop**：开发主分支，包含最新的开发功能
- **feature/\***：功能分支，用于新功能开发
- **bugfix/\***：Bug修复分支
- **release/\***：发布分支，用于准备新版本发布

### 1.2 分支命名规范

- 功能分支：`feature/模块名-功能描述`
- Bug修复分支：`bugfix/模块名-问题描述`
- 发布分支：`release/版本号`

### 1.3 分支操作流程

1. 从develop分支创建feature分支
2. 功能开发完成后提交Pull Request到develop
3. 代码评审通过后合并到develop
4. 准备发布时创建release分支
5. 发布测试通过后合并到main和develop
6. 在main分支创建tag

## 2. 代码规范

### 2.1 前端代码规范

#### 2.1.1 Vue组件规范

- 组件命名：PascalCase（如：LoginForm）
- 文件命名：kebab-case（如：login-form.vue）
- 优先使用组合式API（`<script setup lang="ts">`）
- 组件拆分原则：单一职责，高内聚低耦合

#### 2.1.2 TypeScript规范

- 使用类型注解
- 避免使用any
- 使用接口定义复杂类型
- 遵循严格的null检查

#### 2.1.3 代码风格

- 缩进：2个空格
- 单行长度：不超过120字符
- 语句结束：使用分号
- 变量声明：使用const和let，避免var

### 2.2 后端代码规范

#### 2.2.1 Java代码规范

- 类命名：PascalCase
- 方法/变量命名：camelCase
- 常量命名：UPPER_SNAKE_CASE
- 缩进：4个空格

#### 2.2.2 Spring Boot规范

- 遵循Spring Boot最佳实践
- 使用Lombok减少样板代码
- 使用Javadoc注释
- 异常处理统一规范

## 3. 提交规范

### 3.1 提交信息格式

```
type(scope): summary

body

footer
```

### 3.2 提交类型（type）

- **feat**：新功能
- **fix**：Bug修复
- **docs**：文档更新
- **style**：代码格式调整（不影响功能）
- **refactor**：代码重构
- **perf**：性能优化
- **test**：测试相关
- **build**：构建相关
- **ci**：CI配置更新
- **chore**：其他变更

### 3.3 作用域（scope）

- 模块名或功能名
- 如：`feat(login): 添加SSO登录功能`

### 3.4 提交示例

```
feat(portal): 添加系统入口管理功能

- 实现添加入口接口
- 实现编辑入口接口
- 实现删除入口接口
- 添加权限控制

Fixes #123
```

## 4. 代码评审

### 4.1 评审流程

1. 提交Pull Request
2. 指派评审人
3. 评审人进行代码评审
4. 根据评审意见修改代码
5. 评审通过后合并

### 4.2 评审重点

- 代码质量和风格
- 功能实现完整性
- 安全性检查
- 性能优化
- 测试覆盖率

## 5. 文档规范

### 5.1 项目文档

- 技术架构文档
- 部署文档
- 开发环境搭建文档
- API文档

### 5.2 代码文档

- 类和方法注释
- 复杂逻辑说明
- 配置项说明
- 接口文档

## 6. 测试规范

### 6.1 测试类型

- **单元测试**：测试单个函数或组件
- **集成测试**：测试模块间的交互
- **端到端测试**：测试完整的用户流程

### 6.2 测试覆盖率

- 核心功能：≥90%
- 业务逻辑：≥80%
- 工具类：≥85%

### 6.3 测试流程

1. 编写测试用例
2. 运行测试
3. 分析测试结果
4. 修复测试失败的问题

## 7. 安全规范

### 7.1 前端安全

- XSS防护
- CSRF防护
- 敏感信息保护
- 输入验证

### 7.2 后端安全

- SQL注入防护
- 认证授权
- 敏感数据加密
- 接口权限控制

### 7.3 数据安全

- 数据备份策略
- 访问控制
- 数据脱敏

## 8. 环境配置

### 8.1 开发环境

- Node.js 18+
- JDK 21
- Maven 3.8+
- MySQL 8.0

### 8.2 环境变量

- 开发环境：.env.development
- 测试环境：.env.test
- 生产环境：.env.production

## 9. 问题追踪

### 9.1 Issue类型

- **功能请求**：新功能建议
- **Bug报告**：问题反馈
- **任务**：开发任务
- **改进**：代码或流程改进

### 9.2 Issue模板

- 标题：简洁明了的描述
- 环境：相关环境信息
- 描述：详细的问题或需求描述
- 步骤：复现步骤或实现要点
- 预期结果：期望的结果
- 实际结果：实际情况

## 10. 版本发布

### 10.1 版本号规范

`主版本.次版本.修订版本`

- **主版本**：不兼容的API变更
- **次版本**：向下兼容的功能性新增
- **修订版本**：向下兼容的问题修正

### 10.2 发布流程

1. 创建release分支
2. 更新版本号
3. 运行测试
4. 构建发布包
5. 部署到测试环境
6. 测试通过后部署到生产环境
7. 合并到main和develop分支
8. 创建标签（tag）
9. 编写发布说明